2015-09-22 11:25:39,296 [6] ERROR KH.Admin.Global - 系统发生未处理异常
System.Data.SqlClient.SqlException (0x80131904): INSERT 语句与 FOREIGN KEY 约束"FK_T_AdminUserRoles_T_AdminUsers"冲突。该冲突发生于数据库"KHDB"，表"dbo.T_AdminUsers", column 'Id'。
语句已终止。
   在 Maticsoft.DBUtility.DbHelperSQL.GetSingle(String SQLString, SqlParameter[] cmdParms) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.DAL\DbHelperSQL.cs:行号 694
   在 KH.DAL.AdminUserRolesDAL.Add(AdminUserRoles model) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.DAL\AdminUserRolesDAL.cs:行号 67
   在 KH.BLL.AdminUserRolesBLL.Add(AdminUserRoles model) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.BLL\AdminUserRolesBLL.cs:行号 46
   在 KH.BLL.AdminUserRolesBLL.AddAdminUserRoles(Int64 roleId, IEnumerable`1 roleIds) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.BLL\AdminUserRolesBLL.ext.cs:行号 24
   在 KH.Admin.AdminUser.AdminUserController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\AdminUserController.ashx.cs:行号 82
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
ClientConnectionId:5c593b9a-4c07-45dd-9eb5-fdb9e9273413
2015-09-22 16:56:17,695 [8] ERROR KH.Admin.Global - 系统发生未处理异常
System.Exception: 列名 'PowerName' 无效。
   在 Maticsoft.DBUtility.DbHelperSQL.Query(String SQLString, SqlParameter[] cmdParms) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.DAL\DbHelperSQL.cs:行号 749
   在 KH.DAL.PowersDAL.GetByUserName(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.DAL\PowersDAL.ext.cs:行号 23
   在 KH.BLL.PowersBLL.GetByUserName(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.BLL\PowersBLL.ext.cs:行号 19
   在 KH.BLL.PowersBLL.IsPowerExists(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.BLL\PowersBLL.ext.cs:行号 27
   在 KH.Admin.AdminUser.PowerController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\PowerController.ashx.cs:行号 40
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 16:56:17,695 [6] ERROR KH.Admin.Global - 系统发生未处理异常
System.Exception: 列名 'PowerName' 无效。
   在 Maticsoft.DBUtility.DbHelperSQL.Query(String SQLString, SqlParameter[] cmdParms) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.DAL\DbHelperSQL.cs:行号 749
   在 KH.DAL.PowersDAL.GetByUserName(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.DAL\PowersDAL.ext.cs:行号 23
   在 KH.BLL.PowersBLL.GetByUserName(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.BLL\PowersBLL.ext.cs:行号 19
   在 KH.BLL.PowersBLL.IsPowerExists(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.BLL\PowersBLL.ext.cs:行号 27
   在 KH.Admin.AdminUser.PowerController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\PowerController.ashx.cs:行号 40
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 16:56:45,060 [13] ERROR KH.Admin.Global - 系统发生未处理异常
System.Exception: 列名 'PowerName' 无效。
   在 Maticsoft.DBUtility.DbHelperSQL.Query(String SQLString, SqlParameter[] cmdParms) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.DAL\DbHelperSQL.cs:行号 749
   在 KH.DAL.PowersDAL.GetByUserName(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.DAL\PowersDAL.ext.cs:行号 23
   在 KH.BLL.PowersBLL.GetByUserName(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.BLL\PowersBLL.ext.cs:行号 19
   在 KH.BLL.PowersBLL.IsPowerExists(String powername) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.BLL\PowersBLL.ext.cs:行号 27
   在 KH.Admin.AdminUser.PowerController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\PowerController.ashx.cs:行号 40
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 17:04:15,825 [8] ERROR KH.Admin.Global - 系统发生未处理异常
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 KH.Admin.AdminHelper.GetUserIdInSession(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminHelper.cs:行号 34
   在 KH.Admin.AdminHelper.RecordOperationLog(String description) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminHelper.cs:行号 121
   在 KH.Admin.AdminUser.PowerController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\PowerController.ashx.cs:行号 49
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 18:24:19,523 [12] ERROR KH.Admin.Global - 系统发生未处理异常
System.FormatException: 输入字符串的格式不正确。
   在 System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   在 System.Number.ParseInt64(String value, NumberStyles options, NumberFormatInfo numfmt)
   在 System.Convert.ToInt64(String value)
   在 KH.Admin.AdminUser.RoleController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\RoleController.ashx.cs:行号 71
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 18:24:50,609 [13] ERROR KH.Admin.Global - 系统发生未处理异常
System.FormatException: 输入字符串的格式不正确。
   在 System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   在 System.Number.ParseInt64(String value, NumberStyles options, NumberFormatInfo numfmt)
   在 System.Convert.ToInt64(String value)
   在 KH.Admin.AdminUser.RoleController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\RoleController.ashx.cs:行号 55
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 18:24:52,151 [12] ERROR KH.Admin.Global - 系统发生未处理异常
System.FormatException: 输入字符串的格式不正确。
   在 System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   在 System.Number.ParseInt64(String value, NumberStyles options, NumberFormatInfo numfmt)
   在 System.Convert.ToInt64(String value)
   在 KH.Admin.AdminUser.RoleController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\RoleController.ashx.cs:行号 55
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 18:24:53,575 [13] ERROR KH.Admin.Global - 系统发生未处理异常
System.FormatException: 输入字符串的格式不正确。
   在 System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   在 System.Number.ParseInt64(String value, NumberStyles options, NumberFormatInfo numfmt)
   在 System.Convert.ToInt64(String value)
   在 KH.Admin.AdminUser.RoleController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\RoleController.ashx.cs:行号 55
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 22:19:28,671 [7] ERROR KH.Admin.Global - 系统发生未处理异常
System.Exception: action错误
   在 KH.Admin.AdminUser.AdminUserController.ProcessRequest(HttpContext context) 位置 f:\培训.net\项目文件\匡衡教育\KuangHengEducation\KH.Admin\AdminUser\AdminUserController.ashx.cs:行号 228
   在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
2015-09-22 22:23:57,428 [9] ERROR KH.Admin.Global - 系统发生未处理异常
System.Web.HttpException (0x80004005): 无法连接到 SQL Server 会话数据库。 ---> System.Data.SqlClient.SqlException (0x80131904): 在从服务器接收结果时发生传输级错误。 (provider: TCP Provider, error: 0 - 指定的网络名不再可用。) ---> System.ComponentModel.Win32Exception (0x80004005): 指定的网络名不再可用。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   在 System.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   在 System.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   在 System.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   在 System.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   在 System.Data.SqlClient.SqlDataReader.get_MetaData()
   在 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   在 System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   在 System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   在 System.Web.SessionState.SqlSessionStateStore.SqlExecuteReaderWithRetry(SqlCommand cmd, CommandBehavior cmdBehavior)
ClientConnectionId:07322f38-a2dd-44b3-b87e-fed1110dc9ec
   在 System.Web.SessionState.SqlSessionStateStore.ThrowSqlConnectionException(SqlConnection conn, Exception e)
   在 System.Web.SessionState.SqlSessionStateStore.SqlExecuteReaderWithRetry(SqlCommand cmd, CommandBehavior cmdBehavior)
   在 System.Web.SessionState.SqlSessionStateStore.DoGet(HttpContext context, String id, Boolean getExclusive, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actionFlags)
   在 System.Web.SessionState.SqlSessionStateStore.GetItemExclusive(HttpContext context, String id, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actionFlags)
   在 System.Web.SessionState.SessionStateModule.GetSessionStateItem()
   在 System.Web.SessionState.SessionStateModule.BeginAcquireState(Object source, EventArgs e, AsyncCallback cb, Object extraData)
   在 System.Web.HttpApplication.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
